---
date: 2026-02-07 15:30:00
updated: 2026-02-07 15:30:00
title: 构造 - 专题训练 II
katex: true
tags:
- Algo
- C++
- Constructive
categories:
- XCPC
description: 本专题记录广义的构造题目，只要带有构造性步骤的都算，每篇文章至多 10 题。
---

## [CF1463B] Find The Array

考虑构造出一种情况 $b_i,b_{i+1}$ 之间的约束条件永真，一个自然的想法是令 $b_i$ 为 $2$ 的幂。

既然是 $2$ 的幂次，那就让每一个绝对值里的值尽可能小，所以这里找 $k$ 使得 $2^k \le a_i<2^{k+1}$。

此时 $2\sum |a_i-b_i|=\sum(2a_i-2^{k+1})<\sum a_i=S$。

题解给出了另一种方法，既然想让这个约束条件永真，只要相邻两个元素有一个 $1$ 也能满足这一点，自然另一个就填对应的 $a_i$。

然后，$2\sum_{i=\texttt{odd}}(a_i-1)+2\sum_{i=\texttt{even}} (a_i-1)=2S-2n$，所以一定有一个值 $\le S-n<S$。

[AC Code](https://gist.github.com/hikariyo/184ed2cf1de1c8b6aa7507b53ac9856c)。

## [CF1366D] Two Divisors

首先，$(d_1,d_2)\mid d_1+d_2$，所以 $(d_1,d_2)=1$ 是 $(d_1+d_2,a_i)=1$ 成立的必要条件。

进一步地，从算术基本定理的角度考虑，把 $a_i$ 分解后变成 $p_1^{k_1}p_2^{k_2}\dots p_m^{k_m}$。

显然 $m=1$ 时，任意一个非 $1$ 的因子 $d$ 都满足 $p_1\mid d$，不可能找到 $d_1,d_2$ 满足 $d_1\perp d_2$。

当 $m\ge 2$ 时，我们需要找到 $d_1,d_2$ 满足 $d_1\perp d_2$ 并且 $\forall 1\le j\le m, p_j\not\mid d_1+d_2$。

当 $p_j\mid d_1$ 时，$p_j\mid d_1+d_2$ 成立当且仅当 $p_j\mid d_2$，而又因为 $d_1\perp d_2$ 得知这是不可能的。

因此这就给出了一个构造方法，让每一个 $p_j$ 都是 $d_1$ 或 $d_2$ 的因子即可。

[AC Code](https://gist.github.com/hikariyo/0f0750cc82d468770c65bebd28a2ee68)。

## [CF796D] Police Stations

首先，树的性质保证了删掉边的数量 $+1$ 与连通分量数量 $m$ 相等。

设节点数量是 $n$，警局数量去重之后是 $p$，那么 $m\le p$ 是成立的，因为你不可能把 $p$ 个警局放到多于 $p$ 个连通块里面。

又因为题目保证每一个点到最近警局的距离 $\le d$，这里能够给出一个构造方法使得连通块数量达到上界 $p$：做一个多源最短路，找到离每一个点最近的警局，这些点就构成了 $p$ 个不同的连通分量。

[AC Code](https://gist.github.com/hikariyo/841477e1bdf2deec38f271a0a7a5c099)。

## [CF1450C2] Errich-Tac-Toe (Hard Version)

类似于本文第一题的思想，考虑能不能把可能进行的操作分成 $3$ 种，让它们加起来的操作数量等于 $k$，即把 $k$ 个非空白位置按照某种方式划分成三种方案的**无交之并**，那么最小的那种操作方案的操作数量就满足至多为 $\cfrac{k}{3}$。

如果这是一条直线的话，很自然可以想到按照模 $3$ 为 $0,1,2$ 的三种位置分类染色，这样每连续三个格子都会有不同的颜色。

取两个颜色 $A,B$，我们只需要保证颜色为 $A$ 的格子要么是空白、要么是 $\texttt{O}$；颜色为 $B$ 的格子要么是空白、要么是 $\texttt{X}$，就能保证连续三个格子不可能同时是 $\texttt{O}$ 或 $\texttt{X}$。

拓展到平面，此时我们按照下标 $i+j$ 模 $3$ 分类染色，这样每连续三个格子都会有不同的颜色。为什么这么想？因为连续的三个格子一定有一个坐标是不变的，另外一个坐标是 $+0,+1,+2$，因此这某种程度上也是在直线上的结论。

设 $O_i,X_i$ 表示颜色为 $i$ 的初始 $\texttt{O},\texttt{X}$ 的数量，那么 $\sum_{i=0}^3 O_i+\sum_{i=0}^3 X_i=k$。

于是选择 $A,B$ 使得 $O_A+X_B$ 最小，就能保证 $k=\sum_{i=0}^3 O_i+\sum_{i=0}^3 X_i\ge 3(O_A+X_B)$，即 $O_A+X_B\le \cfrac{k}{3}$。

实际的实现中，我们只需要保证选择的一组 $A,B$ 确实 $\le \cfrac{k}{3}$ 即可，根据上面的阐述一定会存在一组 $A,B$ 满足这一条件。

[AC Code](https://gist.github.com/hikariyo/11dde2a212796c195d3098b048859370)。

## [CF1217D] Coloring Edges

首先用拓扑排序判掉 DAG 的情形，下面我们关注有环的情形。

如果有环 $v_1,v_2,\dots,v_k,v_1,v_2,\dots$，由于这里一共只有 $k$ 个互异的整数，则必然会存在一条边 $(a,b)$ 使得 $a>b$，否则根据小于关系的传递性可以推出 $v_1<v_1$，不符合小于关系的反自反性。

因此，只要我们满足每一条边 $(a,b)$ 都有 $a<b$，就可以断定构造出来的图没有环；类似地，如果满足每条边都有 $a>b$，也可以断定构造出来的图没有环。

[AC Code](https://gist.github.com/hikariyo/589e6fecb1fa02a5a0c3abbcb4e8469a)。
