---
title: 开发 - 迁移 VPS 到 Vultr
date: 2022-09-09 16:27:32.366
updated: 2022-09-09 17:29:15.534
categories: 
- Dev
tags: 
- Nginx
- VPS
---

## 为什么要迁移

趁着中秋节之前总算是把我的 `VPS` 迁移到了 `Vultr`，域名也换了一个 `.me` 结尾的，更有个人网站的感觉，~~但是一年下来也得多花不少钱，疼死我了~~。

我以前是全套阿里云，服务器是他的，域名也是从他那里买的。不是说阿里云不好，但是对于我这种小小的个人网站来说，他的价格有点高，没有活动最低配置是七八百。

而且，由于某些**众所周知的原因**，管得比较严。做很多事情都要去报备，着实比较烦心。

## 迁移过程

这里不是为了做教学，只是记录一下，不会说的太详细。因为首先**我记不住**，其次我不想专门为了演示重新走一遍整个过程，实在是太费神了。

### 把原来的退掉

我的情况比较复杂，简单描述一下：我在去年搞活动时候入手的低价服务器，但前几个月按原价续费了，到退款时有效期还有一年。

所以说我去开了一个工单（具体怎么开我忘了，不过这个很容易搜到），描述了我的情况，并且说明是由于个人原因不再使用服务器。工程师的态度也很好，让我确认了几次就痛快退钱了。

不过我是**晚上十点**开的工单，他们还在上班，哎，真不容易啊。

### 介绍 Vultr

官网：https://www.vultr.com/

那么我使用它的原因有以下几点：

1. 按小时计费，不会一下花太多钱。
2. 可以随时更改 `VPS`，比如想从日本换到新加坡，只需要把原来的删掉再重新加一个就可以了。
3. 它是一个比较靠谱的老牌服务器供应商，起码短期不会跑路。
4. **可以支付宝付款。**

当然也有缺点，我觉得最难受的就是它**没有香港的** `VPS`，所以我才选择了相对较快的新加坡，当然日本也可以，这个就看个人喜好了。

### 使用 Vultr

注册完账号后，来到个人页面（https://my.vultr.com）右边有个醒目的加号，然后点击 `Deploy New Server` 即可。

![vultr-deploy](/img/2022/09/vultr-deploy.jpg)

操作系统的话看个人喜好，我因为比较喜欢 `Ubuntu` 就选了个最新版的 `Ubuntu 22`，反正我自己也不用考虑什么向后兼容。

至于规格，这就看你的财力和需求了。我是组合出来个 $5 一个月的配置，对我来说是足够了。

### 配置防火墙

这个还是比较重要的，我之前在阿里云的时候就因为这个折腾过好久，本地跑得好好的，一上服务器就死活连不上，原来是防火墙把我给防住了。

还是在个人主页，找到 `Firewall` 这个选项卡，然后新增一个组。

![vultr-firewall-create](/img/2022/09/vultr-firewall-create.jpg)

之后大家根据自己需要开放对应端口就可以了，起码要开放 `http` 的 `80` 和 `https` 的  `443` 吧。

也**别忘了关联上自己的 `VPS`，要不然不生效。**

![vultr-firewall-link](/img/2022/09/vultr-firewall-link.jpg)

除了在这里有防火墙，我们的 `VPS` 系统本身也有防火墙。以我的 `ubuntu 22` 为例，它的防火墙是 `ufw`，所以我们需要如下命令：

```bash
sudo ufw allow 80
sudo ufw allow 443
sudo ufw reload
```

如果你是 `CentOS` 或其它的，还请自行搜索。

### 安装 Nginx

这个就很简单了：

```bash
sudo apt install nginx
```

至于这个服务到底启动没有，你可以通过以下命令查看：

```bash
sudo systemctl status nginx
```

如果一切正常，那么此时在浏览器地址栏输入你 `VPS` 的 `IP` 地址，就可以看到经典的 `Nginx` 欢迎页面啦！

### 域名

我是在 [NameSilo](https://www.namesilo.com) 购买的域名，当然你可以用其它的服务商，都差不多的。

买完之后把 DNS 绑定上自己 `VPS` 的 `IP` 地址即可，这个步骤比较简单，不了解的朋友可以自行搜索以下。

### 启用 HTTPS

我使用的是 [Certbot](https://certbot.eff.org/)，进入官网后根据实际情况选择即可。如果你一路和我配置相同，那么就是 `Nginx on Ubuntu 20`，[点击这里](https://certbot.eff.org/instructions?ws=nginx&os=ubuntufocal)快速前往。

虽然我是 `Ubuntu 22`，但我现在能正常运行，说明这个不影响。

之后跟着它的步骤走即可，本文完。
